CREATE TABLE flores (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
    user_id UUID REFERENCES auth.users NOT NULL,
    nombre_cientifico TEXT,
    nombre_comun TEXT,
    familia TEXT,
    descripcion TEXT,
    exposicion_solar TEXT,
    estacion_preferida TEXT,
    alcalinidad_preferida TEXT,
    colores TEXT[],
    es_toxica BOOLEAN,
    foto_url TEXT
);

ALTER TABLE flores ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Usuarios ven sus propias flores" ON flores
    FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Usuarios insertan sus propias flores" ON flores
    FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Usuarios eliminan sus propias flores" ON flores
    FOR DELETE USING (auth.uid() = user_id); 